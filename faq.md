# 常见问题和回答 FAQ

## 常见问题

## 代码问题

### 为什么使用节点的线程安全队列头节点用智能指针而尾节点不用？

头节点（head_）是链表的 “起点”，负责管理整个链表的内存所有权。
RAII机制，通过移动或销毁头节点来管理整个链表的生命周期。同时

尾节点（tail_）的作用是快速定位链表末尾，方便入队时插入新节点。
尾节点仅用于 “标记” 链表的末尾位置，不负责管理节点内存（内存所有权由头节点的unique_ptr链传递）。
同时简化插入节点流程，如果是std::unique_ptr，使用移动语句。还有避免性能开销。

### 为什么在push函数里将节点的创造放在加锁前？
因为如果节点指向元素内存消耗大，创建时间长，加锁后处理导致长时间阻塞线程，降低性能。

### 实现有界队列为什么选择组合而不是继承？
因为有界队列的功能是对现有线程安全队列的扩展，使用组合可以更好地复用现有代码。
组合可以让有界队列在不修改原有线程安全队列的情况下，添加新的功能和限制。组合降低耦合度。

